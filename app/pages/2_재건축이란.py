# app/pages/2_재건축이란.py
# -------------------------------------------------------------
# 🏗 재건축이란? — 설명 페이지 (요청한 모든 내용 포함)
# -------------------------------------------------------------
import os
from pathlib import Path
import streamlit as st

# ---- Basic page setup


st.set_page_config(page_title="🏗 재건축이란?", layout="wide")
st.title("🏗 재건축이란?")
st.caption("AIoT 스마트 인프라 대시보드 · 재건축 개념·법제·절차·공동주택 정의 · 실무 Q&A")

# ---- Light styles
st.markdown("""
<style>
/* 기존 내용 + 상단 패딩 추가 */
.block-container {
    padding-top: 3rem !important;   /* ← 여기서 높이 조절 */
}
hr.soft { border: none; height: 1px; background: #1f2937; margin: 16px 0; }
.small-muted { color:#9ca3af; font-size:0.9rem; }
.kpi-card { padding: 14px; border-radius: 14px; background: #111827; border: 1px solid #1f2937; }
</style>
""", unsafe_allow_html=True)


# -------------------------------------------------------------------------
# 0) 한눈에 보는 요약
# -------------------------------------------------------------------------
with st.container(border=True):
    st.subheader("📌 한눈에 보는 요약")
    st.markdown("""
- **정의**: **재건축(再建築)**은 **노후·불량 건축물을 철거하고 새 건축물 및 부대·복리시설을 설치하는 정비사업**입니다.  
- **대상**: 법적으로 공동주택에 한정되진 않지만, **실무상 대부분 공동주택(특히 아파트)** 중심으로 추진됩니다.  
- **절차**: 안전진단 → 정비계획/구역지정 → 조합설립 → 사업시행인가 → 관리처분 → 이주·철거 → 착공·준공  
- **재건축 vs 재개발**: 재건축은 주로 **공동주택** 개선, 재개발은 **노후 저층주거지/도심 기능 회복** 중심.  
- **공동주택 정의**: **여러 세대가 한 건물(또는 동일 대지) 안에서 공용부분을 함께 사용하는 주택**(아파트·연립·다세대·기숙사형).  
- **다가구는 왜 공동주택이 아님?**: **1동 1소유(단독소유)** 구조 → 법적으로 **단독주택** 분류.  
- **AIoT 대시보드 포인트**: KPI·시뮬레이션·자동 리포트로 **정량 근거** 제공, **협의 지연 방지** 및 **제안 경쟁력 강화**.
""")

st.markdown("<hr class='soft'/>", unsafe_allow_html=True)

# -------------------------------------------------------------------------
# 1) 재건축이란 무엇인가?
# -------------------------------------------------------------------------
st.header("1) 재건축이란 무엇인가?")
st.markdown("""
**재건축(再建築, Reconstruction)**은 **노후된 건축물이나 주거 단지를 헐고 새로 짓는 사업**을 말합니다.  
주로 아파트 단지처럼 일정 연한이 지난 **공동주택**에서 많이 이루어집니다.

- **기본 개념**: 기존 건축물의 **구조적·기능적 노후화**를 이유로,  
  **기존 건물 철거 → 새 건물 신축**의 과정을 거치는 **정비사업**입니다.
- **법적 근거**: 「**도시 및 주거환경정비법(도정법)**」에 근거하여 시행되며, **재개발**과 함께 대표적인 정비사업 유형입니다.
""")

st.subheader("재건축 vs 재개발")
st.markdown("""
| 구분 | 재건축 | 재개발 |
|------|--------|--------|
| 대상 | 노후·불량 **공동주택(아파트 등)** | 노후 **저층주거지** 또는 **도시환경정비구역** |
| 주체 | 기존 **토지·건물 소유자(조합원)** | 토지·건물 소유자 + 세입자 |
| 목적 | **주거환경 개선**, 주택가치 상승 | **도시기능 회복**, 기반시설 확충 |
| 절차 | 안전진단 → 조합설립 → 사업시행인가 → 관리처분 → 착공 | 구역지정 → 조합설립 → 사업시행 → 관리처분 → 착공 |
| 예시 | 1980~90년대 아파트 단지 재건축 | 낙후된 도심 다세대·다가구 밀집지 재개발 |
""")

st.subheader("재건축의 주요 절차")
st.markdown("""
1. **안전진단** – 구조적·기능적 노후 수준 평가  
2. **정비계획 수립 및 구역지정** – 지자체가 정비구역 지정  
3. **조합 설립** – 토지·건물 소유자가 조합 결성  
4. **사업시행인가** – 세대수·용적률·기반시설 계획 확정  
5. **관리처분인가** – 분양계획 및 조합원 분담금 확정  
6. **이주 및 철거 → 착공 → 준공**
""")

st.subheader("AIoT 대시보드 관점의 의미")
st.markdown("""
- 단계별 **의사결정 포인트**(조합 설립 전/후, 인허가, 착공 전)를 **정량화**  
- 입지·교통·수익성·리스크 등 **KPI 기반 비교/시뮬레이션**으로  
  **‘참여 타당성’과 ‘협의 효율성’**을 평가
""")

st.markdown("<hr class='soft'/>", unsafe_allow_html=True)

# -------------------------------------------------------------------------
# 2) 공동주택만 해당되는가?
# -------------------------------------------------------------------------
st.header("2) 공동주택만 해당되는가?")
st.markdown("""
**결론**: **법적으로는 공동주택에 한정되지 않지만**, **실무적으로는 대부분 공동주택(특히 아파트)** 대상입니다.
""")

st.markdown("""
**법적 정의 기준**(도정법 제2조):  
> “노후·불량건축물이 밀집한 지역에서 건축물을 철거하고 새로 건축물 및 부대시설·복리시설을 설치하는 사업”  
→ **단독주택·다가구·상가건물 등도 포함 가능**하지만, 실제 추진은 드뭅니다.
""")

st.markdown("""
**실무 현실 – ‘재건축 = 아파트 재건축’로 굳어진 이유**
- **사업성**: 단독주택지는 필지 작고 소유자 다수 → 수익성 낮음  
- **조합 구성 난이도**: 동의율 확보/조합 설립 복잡  
- **토지이용 효율**: 아파트는 용적률 상향 시 사업성 개선 폭 큼  
- **행정 인허가**: 지자체 정비계획이 대규모 공동주택 중심
""")

st.markdown("""
**특수 형태**
- **소규모 재건축사업**(도정법 제2조 제12항): **200세대 미만** 공동주택 단지 대상, 절차 간소화  
- **상가·업무시설 재건축**: 도정법상 재건축이 아니라 **건축법 또는 민간개발**로 처리
""")

st.markdown("""
**정리**
| 구분 | 재건축 적용 가능 | 비고 |
|------|------------------|------|
| 아파트·연립·다세대 | ✅ | 일반적인 재건축 |
| 단독·다가구 | ⚙️ | 이론상 가능하나 드뭅니다 |
| 상가·오피스 | ❌ (도정법 외) | 건축법상 재건축/리모델링 |
| 소규모 공동주택(200세대 미만) | ✅ | 소규모 재건축사업 |
""")

st.markdown("<hr class='soft'/>", unsafe_allow_html=True)

# -------------------------------------------------------------------------
# 3) 공동주택이란 무엇인가?
# -------------------------------------------------------------------------
st.header("3) 공동주택이란 무엇인가?")
st.markdown("""
**공동주택(共同住宅)**은 **여러 세대가 하나의 건축물(또는 동일 대지) 안에서 공용부분(복도·계단·주차장 등)을 함께 사용하는 주택**입니다.  
(주택법 제2조 제3호)
""")

st.markdown("""
**주요 유형**
- **아파트**: 5층 이상, 엘리베이터 등 설비 포함  
- **연립주택**: 4층 이하, 한 건물에 여러 세대  
- **다세대주택**: 4층 이하, 660㎡ 이하 대지 등 소규모(일명 ‘빌라’) — **세대별 분양/등기 가능**  
- **기숙사형 주택**: 학생·직원 등 공동생활 목적
""")

st.markdown("""
**단독주택과 비교**
| 구분 | 단독주택 | 공동주택 |
|------|-----------|-----------|
| 세대 수 | 1세대 | 2세대 이상 |
| 건물 구조 | 1가구 전용 | 여러 세대가 공용부분 공유 |
| 관리 주체 | 개인 소유자 | 관리사무소·입주자대표회의 |
| 예시 | 단독주택, **다가구주택** | 아파트, 연립, 빌라 |
""")

st.info("※ **다가구주택**은 겉보기엔 여러 세대가 살더라도 **1동 1소유(단독소유)**라서 **단독주택**으로 분류됩니다.")

st.subheader("재건축과의 관계")
st.markdown("""
- 공동주택은 공용 구조물(기초·기둥·지붕 등)이 노후화되면 **개별 보수보다 전면 정비**가 효율적  
- **공동조합 설립**을 통해 **사업 단위로 통합 정비**가 가능 → 재건축 대상이 되는 경우가 많음
""")

st.markdown("<hr class='soft'/>", unsafe_allow_html=True)

# -------------------------------------------------------------------------
# 4) 왜 다가구는 공동주택이 아닌가?
# -------------------------------------------------------------------------
st.header("4) 왜 다가구는 공동주택이 아닌가?")
st.markdown("""
핵심 이유는 **‘소유 구조’**입니다.
- **다가구주택**: 「건축법 시행령 제3조의5」 — **1개의 건축물 전체가 하나의 소유자**에게 속함 → **단독주택**  
- **공동주택**: 여러 세대가 **각각 독립된 소유권**을 가짐
""")

with st.expander("다가구 vs 다세대 — 구조는 비슷하지만 법적 지위가 다름"):
    st.markdown("""
| 구분 | 다가구주택 | 다세대주택 |
|------|--------------|--------------|
| **소유자 수** | 1명(단독 소유) | 여러 명(세대별 분양/등기) |
| **법적 분류** | 단독주택 | 공동주택 |
| **거래** | 건물 전체 단위 | 세대별 거래 가능 |
| **재건축(도정법)** | 대상 아님(건축법상 신축) | 대상 가능 |
""")

st.subheader("재건축(정비사업)에서의 영향")
st.markdown("""
- 재건축은 기본적으로 **‘공동 소유자들이 조합을 구성’**하는 사업  
- **다가구**는 1인 소유 → **조합 설립 대상 아님**, 노후 시 **개별 신축**으로 처리
""")

st.markdown("<hr class='soft'/>", unsafe_allow_html=True)

# -------------------------------------------------------------------------
# 5) 행정 협의 프로세스 × 대시보드 개입 포인트
# -------------------------------------------------------------------------
st.header("5) 행정 협의 프로세스 × 대시보드 개입 포인트")
img_candidates = [
    "reconstruction_process_dashboard_touchpoints.png",
    "data/reconstruction_process_dashboard_touchpoints.png",
    "images/reconstruction_process_dashboard_touchpoints.png",
]
img_path = next((p for p in img_candidates if os.path.exists(p)), None)
if img_path:
    st.image(img_path, use_column_width=True, caption="각 단계에서 KPI·시뮬레이션·리포트 자동화로 협의 지연 최소화 & 제안 경쟁력 강화")
else:
    st.info("다이어그램을 찾지 못했습니다. `reconstruction_process_dashboard_touchpoints.png` 파일을 프로젝트 루트 또는 app/pages, app/data 경로에 두면 자동 표시됩니다.")

# -------------------------------------------------------------------------
# 6) AIoT 대시보드 관점 — 실무 활용
# -------------------------------------------------------------------------
st.header("6) AIoT 대시보드 관점 — 실무 활용")
st.markdown("""
**핵심 메시지**
1. **시공사는 조합 설립 이전에도** 법적 제약 내에서 **데이터 기반 분석**으로 준비할 수 있다.  
2. **대시보드**는 제안서나 교통영향평가 협의 단계에서 **정량적 근거**로 사용될 수 있다.  
3. **교통혼잡도**는 법정 부담금 산식에 직접 반영되진 않지만, 협의 과정에서 **교통개선비 합리화 + 인허가 지연 방지**에 기여한다.  
4. **KPI**는 사업 리스크를 조기 탐지하고, **행정기관과의 협의에서 객관적 언어**로 활용할 수 있다.  
5. 이 플랫폼은 단순 시각화 도구가 아니라, 재건축 사업의 **데이터 기반 의사결정 지원 시스템**이다.
""")

st.markdown("---")
st.info("좌측 사이드바에서 📊 `KPI & 시뮬`, 🗺️ `지도·필터링`, 📄 `리포트`, 📚 `참여 가이드` 페이지로 이동하세요.")
